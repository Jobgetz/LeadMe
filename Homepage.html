<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="stylesheet.css">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mall Thing</title>
</head>
<body>
    <div class = BigBox>
        <div class = Box>
            <form>
                <input type ="text" id="UserInput" >
            </form>
        

        </div>
        <div class = ResponseBox>
            <p id = "category">
            </p>

        </div>
        <!-- 
            create the button for push to talk
        -->
        <button id="speechButton">Talk</button>
        <script>
            var speech = document.getElementById("speechButton");
            var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            var recognition = new SpeechRecognition(); // function to recognise speech

            speech.addEventListener("click", function() {
                recognition.start(); // start listen
            });

            recognition.onresult = function(event) {
                var prompt = event.results[0][0].transcript; // string of user speech
                console.log(prompt); // print to console
                breakDownText("test")

            };
        </script>

        <script>

            
            const apiKey = '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';
            const apiURL = 'https://api.openai.com/v1/completions';

            async function breakDownText(prompt) {
                // input a prompt into chatgpt and recieve categories.
                const response = await axios.post(apiURL,{
                    prompt: prompt,
                    max_tokens: 20,
                },{
                    headers: {
                        'Authorization': `Bearer ${apiKey}`,
                    }
                });
                // recieve categories
                category = response.data.choices[0].text;

                Document.getElementById("category").innerHTML = category;

            }
        </script>
    </div>
</body>
</html>